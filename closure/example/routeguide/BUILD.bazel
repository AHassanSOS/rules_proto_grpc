load(
    "@io_bazel_rules_closure//closure:defs.bzl",
    "closure_js_binary",
    "closure_js_library",
)
load("//closure:defs.bzl", "closure_proto_library")

closure_proto_library(
    name = "routeguide",
    protos = ["//example/proto:routeguide_proto"],
    visibility = ["//closure/example/routeguide:__subpackages__"],
)

closure_js_library(
    name = "main",
    srcs = [
        "main.js",
    ],
    deps = [
        ":routeguide",
        "@io_bazel_rules_closure//closure/library",
        "@io_bazel_rules_closure//closure/protobuf:jspb",
    ],
)

closure_js_binary(
    name = "bundle",
    compilation_level = "ADVANCED",
    debug = True,
    entry_points = ["goog:my.jspb.test.main"],
    output_wrapper = "(function(){%output%}).call(this);",
    visibility = ["//example/benchmark:__pkg__"],
    deps = [
        ":main",
    ],
)
